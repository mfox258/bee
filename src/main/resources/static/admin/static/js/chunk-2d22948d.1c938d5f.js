(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22948d"],{dd90:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[t("el-form-item",{attrs:{label:"标题",prop:"fileName",required:""}},[t("el-input",{staticStyle:{width:"30%"},model:{value:e.form.fileName,callback:function(t){e.$set(e.form,"fileName",t)},expression:"form.fileName"}})],1),t("el-form-item",{attrs:{label:"时间",prop:"time",required:""}},[t("el-input",{staticStyle:{width:"30%"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),t("el-form-item",{attrs:{label:"地点",prop:"location",required:""}},[t("el-input",{staticStyle:{width:"30%"},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),t("el-form-item",{attrs:{label:"图片",prop:"fileList",required:""}},[e.showUpload?t("el-upload",{staticClass:"upload-demo",attrs:{action:"#","auto-upload":!1,"on-change":e.handleFileChange,"show-file-list":!0,limit:2,drag:!0,multiple:"",name:"files",accept:"image/*"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将图片拖到此处，或"),t("em",[e._v("点击上传")]),e._v(" 注意：图片必须为2张！ ")])]):e._e()],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")]),t("el-button",{attrs:{type:"warning"},on:{click:e.resetFiles}},[e._v("重置图片")])],1)],1)],1)},o=[],l=(i("99af"),i("14d9"),i("fb6a"),i("d3b7"),i("ac1f"),i("00b4"),i("0643"),i("4e3e"),i("159b"),i("b775")),r={test:function(e){return Object(l["b"])("/api/temp/test",e)}},s={data:function(){var e=new Date,t=e.getFullYear(),i=("0"+(e.getMonth()+1)).slice(-2),a=("0"+e.getDate()).slice(-2);return{form:{fileName:"",time:"".concat(t,"-").concat(i,"-").concat(a),location:""},fileList:[],formLoading:!1,showUpload:!0,rules:{fileName:[{required:!0,message:"标题不可为空！",trigger:"blur"}],time:[{required:!0,message:"时间不可为空！",trigger:"blur"}],location:[{required:!0,message:"地点不可为空！",trigger:"blur"}],fileList:[{required:!0,message:"图片必须上传2张！",trigger:"change"}]}}},methods:{handleFileChange:function(e,t){this.fileList=t},submitForm:function(){var e=this,t=this,i=new FormData;i.append("fileName",this.form.fileName),i.append("time",this.form.time),i.append("location",this.form.location),this.fileList.forEach((function(e){i.append("files",e.raw)})),console.log(i),r.test(i).then((function(i){e.formLoading=!0,1===i.code?(t.$message.success(i.message),t.delCurrentView(t).then((function(){t.$router.push("/user/admin/list")}))):(t.$message.error(i.message),t.formLoading=!1)})).catch((function(e){t.formLoading=!1}))},resetFiles:function(){var e=this;this.showUpload=!1,this.$nextTick((function(){e.showUpload=!0})),this.fileList=[]}},created:function(){}},n=s,m=i("2877"),c=Object(m["a"])(n,a,o,!1,null,null,null);t["default"]=c.exports}}]);